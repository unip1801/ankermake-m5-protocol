# Development Dockerfile with git support
FROM python:3.11-bullseye

# Install git and other development tools
RUN apt-get update && \
    apt-get install -y git make vim curl wget net-tools inotify-tools && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

# Set the working directory to /app
WORKDIR /app

# Copy the requirements files first (for better caching)
COPY requirements.txt requirements-dev.txt ./

# Disable warning about running as "root"
ENV PIP_ROOT_USER_ACTION=ignore

# Disable caching - we just want the output
ENV PIP_NO_CACHE_DIR=1

# Install the dependencies (including dev dependencies)
RUN pip install --upgrade pip && \
    pip install -r requirements-dev.txt

# Create necessary directories
RUN mkdir -p /root/.config/

# For development, source code will be mounted as a volume
# So we don't copy it here to allow live editing

# Default command for development - just keep container running
CMD ["sleep", "infinity"]
